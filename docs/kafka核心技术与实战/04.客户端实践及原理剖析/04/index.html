<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-backend/umi.3ec1f225.css" />
    <script>
      window.routerBase = "/blog-backend";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>12 | 客户端都有哪些不常见但是很高级的功能？ - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/kafka核心技术与实战/04.客户端实践及原理剖析/04" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-backend/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-backend/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-backend/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-backend/go语言项目开发实战">go语言项目开发实战</a></li><li><a aria-current="page" class="active" href="/blog-backend/kafka核心技术与实战">kafka核心技术与实战</a></li><li><a href="/blog-backend/kafka核心源码解读">kafka核心源码解读</a></li><li><a href="/blog-backend/零基础学python">零基础学python</a></li><li><a href="/blog-backend/python核心技术与实战">python核心技术与实战</a></li><li><a href="/blog-backend/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-backend/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-backend/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-backend/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-backend/后端存储实战课">后端存储实战课</a></li><li><a href="/blog-backend/后端技术面试38讲">后端技术面试38讲</a></li><li><a href="/blog-backend/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li><li><a href="/blog-backend/现代c编程实战">现代c编程实战</a></li><li><a href="/blog-backend/罗剑锋的c实战笔记">罗剑锋的c实战笔记</a></li><li><a href="/blog-backend/零基础入门spark">零基础入门spark</a></li></ul></span><span>架构师<ul><li><a href="/blog-backend/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-backend/数据中台实战课">数据中台实战课</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-backend/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-backend/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-backend/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-backend/go语言项目开发实战">go语言项目开发实战</a></li><li><a aria-current="page" class="active" href="/blog-backend/kafka核心技术与实战">kafka核心技术与实战</a></li><li><a href="/blog-backend/kafka核心源码解读">kafka核心源码解读</a></li><li><a href="/blog-backend/零基础学python">零基础学python</a></li><li><a href="/blog-backend/python核心技术与实战">python核心技术与实战</a></li><li><a href="/blog-backend/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-backend/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-backend/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-backend/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-backend/后端存储实战课">后端存储实战课</a></li><li><a href="/blog-backend/后端技术面试38讲">后端技术面试38讲</a></li><li><a href="/blog-backend/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li><li><a href="/blog-backend/现代c编程实战">现代c编程实战</a></li><li><a href="/blog-backend/罗剑锋的c实战笔记">罗剑锋的c实战笔记</a></li><li><a href="/blog-backend/零基础入门spark">零基础入门spark</a></li></ul></li><li>架构师<ul><li><a href="/blog-backend/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-backend/数据中台实战课">数据中台实战课</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-backend/kafka核心技术与实战">kafka核心技术与实战</a></li><li><a href="/blog-backend/kafka核心技术与实战/01.开篇词">01.开篇词</a><ul><li><a href="/blog-backend/kafka核心技术与实战/01.开篇词/01"><span>开篇词 | 为什么要学习Kafka？</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门">02.Kafka入门</a><ul><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门/01"><span>01 |  消息引擎系统ABC</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门/02"><span>02 | 一篇文章带你快速搞定Kafka术语</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门/03"><span>03 | Kafka只是消息引擎系统吗？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门/04"><span>04 | 我应该选择哪种Kafka？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/02.kafka入门/05"><span>05 | 聊聊Kafka的版本号</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/03.kafka的基本使用">03.Kafka的基本使用</a><ul><li><a href="/blog-backend/kafka核心技术与实战/03.kafka的基本使用/01"><span>06 | Kafka线上集群部署方案怎么做？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/03.kafka的基本使用/02"><span>07 | 最最最重要的集群参数配置（上）</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/03.kafka的基本使用/03"><span>08 | 最最最重要的集群参数配置（下）</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析">04.客户端实践及原理剖析</a><ul><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/01"><span>09 |  生产者消息分区机制原理剖析</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/02"><span>10 | 生产者压缩算法面面观</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/03"><span>11 | 无消息丢失配置怎么实现？</span></a></li><li><a aria-current="page" class="active" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04"><span>12 | 客户端都有哪些不常见但是很高级的功能？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/05"><span>13 |  Java生产者是如何管理TCP连接的？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/06"><span>14 | 幂等生产者和事务生产者是一回事吗？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/07"><span>15 | 消费者组到底是什么？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/08"><span>16 | 揭开神秘的“位移主题”面纱</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/09"><span>17 | 消费者组重平衡能避免吗？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/10"><span>18 | Kafka中位移提交那些事儿</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/11"><span>19 | CommitFailedException异常怎么处理？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/12"><span>20 | 多线程开发消费者实例</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/13"><span>21 | Java 消费者是如何管理TCP连接的?</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/14"><span>22 | 消费者组消费进度监控都怎么实现？</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核">05.深入Kafka内核</a><ul><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核/01"><span>23 | Kafka副本机制详解</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核/02"><span>24 | 请求是怎么被处理的？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核/03"><span>25 | 消费者组重平衡全流程解析</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核/04"><span>26 | 你一定不能错过的Kafka控制器</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/05.深入kafka内核/05"><span>27 | 关于高水位和Leader Epoch的讨论</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控">06.管理与监控</a><ul><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/01"><span>28 | 主题管理知多少?</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/02"><span>29 | Kafka动态配置了解下？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/03"><span>30 | 怎么重设消费者组位移？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/04"><span>31 | 常见工具脚本大汇总</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/05"><span>32 | KafkaAdminClient：Kafka的运维利器</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/06"><span>33 | Kafka认证机制用哪家？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/07"><span>34 | 云环境下的授权该怎么做？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/08"><span>35 | 跨集群备份解决方案MirrorMaker</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/09"><span>36 | 你应该怎么监控Kafka？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/10"><span>37 | 主流的Kafka监控框架</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/11"><span>38 | 调优Kafka，你做到了吗？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/06.管理与监控/12"><span>39 | 从0搭建基于Kafka的企业级实时日志流处理平台</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/07.高级kafka应用之流处理">07.高级Kafka应用之流处理</a><ul><li><a href="/blog-backend/kafka核心技术与实战/07.高级kafka应用之流处理/01"><span>40 | Kafka Streams与其他流处理平台的差异在哪里？</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/07.高级kafka应用之流处理/02"><span>41 | Kafka Streams DSL开发实例</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/07.高级kafka应用之流处理/03"><span>42 | Kafka Streams在金融领域的应用</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/08.特别放送">08.特别放送</a><ul><li><a href="/blog-backend/kafka核心技术与实战/08.特别放送/01"><span>加餐 | 搭建开发环境、阅读源码方法、经典学习资料大揭秘</span></a></li><li><a href="/blog-backend/kafka核心技术与实战/08.特别放送/02"><span>用户故事 | 黄云：行百里者半九十</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/09.结束语">09.结束语</a><ul><li><a href="/blog-backend/kafka核心技术与实战/09.结束语/01"><span>结束语 | 以梦为马，莫负韶华！</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/10.结课测试">10.结课测试</a><ul><li><a href="/blog-backend/kafka核心技术与实战/10.结课测试/01"><span>期末测试 | 这些Kafka核心要点，你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-backend/kafka核心技术与实战/summary">kafka核心技术与实战</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="什么是拦截器？" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#什么是拦截器"><span>什么是拦截器？</span></a></li><li title="Kafka拦截器" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#kafka拦截器"><span>Kafka拦截器</span></a></li><li title="典型使用场景" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#典型使用场景"><span>典型使用场景</span></a></li><li title="案例分享" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#案例分享"><span>案例分享</span></a></li><li title="小结" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#小结"><span>小结</span></a></li><li title="开放讨论" data-depth="2"><a href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#开放讨论"><span>开放讨论</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="12--客户端都有哪些不常见但是很高级的功能"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#12--客户端都有哪些不常见但是很高级的功能"><span class="icon icon-link"></span></a>12 | 客户端都有哪些不常见但是很高级的功能？</h1><p>你好，我是胡夕。今天我要和你分享的主题是：客户端都有哪些不常见但是很高级的功能。</p><p>既然是不常见，那就说明在实际场景中并没有太高的出场率，但它们依然是很高级很实用的。下面就有请今天的主角登场：Kafka拦截器。</p><h2 id="什么是拦截器"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#什么是拦截器"><span class="icon icon-link"></span></a><strong>什么是拦截器？</strong></h2><p>如果你用过Spring Interceptor或是Apache Flume，那么应该不会对拦截器这个概念感到陌生，其基本思想就是允许应用程序在不修改逻辑的情况下，动态地实现一组可插拔的事件处理逻辑链。它能够在主业务操作的前后多个时间点上插入对应的“拦截”逻辑。下面这张图展示了Spring MVC拦截器的工作原理：</p><p><img src="data:image/png;base64,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" alt=""/></p><p><a target="_blank" rel="noopener noreferrer" href="https://o7planning.org/en/11229/spring-mvc-interceptors-tutorial">图片来源<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>拦截器1和拦截器2分别在请求发送之前、发送之后以及完成之后三个地方插入了对应的处理逻辑。而Flume中的拦截器也是同理，它们插入的逻辑可以是修改待发送的消息，也可以是创建新的消息，甚至是丢弃消息。这些功能都是以配置拦截器类的方式动态插入到应用程序中的，故可以快速地切换不同的拦截器而不影响主程序逻辑。</p><p>Kafka拦截器借鉴了这样的设计思路。你可以在消息处理的前后多个时点动态植入不同的处理逻辑，比如在消息发送前或者在消息被消费后。</p><p>作为一个非常小众的功能，Kafka拦截器自0.10.0.0版本被引入后并未得到太多的实际应用，我也从未在任何Kafka技术峰会上看到有公司分享其使用拦截器的成功案例。但即便如此，在自己的Kafka工具箱中放入这么一个有用的东西依然是值得的。今天我们就让它来发挥威力，展示一些非常酷炫的功能。</p><h2 id="kafka拦截器"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#kafka拦截器"><span class="icon icon-link"></span></a><strong>Kafka拦截器</strong></h2><p><strong>Kafka拦截器分为生产者拦截器和消费者拦截器</strong>。生产者拦截器允许你在发送消息前以及消息提交成功后植入你的拦截器逻辑；而消费者拦截器支持在消费消息前以及提交位移后编写特定逻辑。值得一提的是，这两种拦截器都支持链的方式，即你可以将一组拦截器串连成一个大的拦截器，Kafka会按照添加顺序依次执行拦截器逻辑。</p><p>举个例子，假设你想在生产消息前执行两个“前置动作”：第一个是为消息增加一个头信息，封装发送该消息的时间，第二个是更新发送消息数字段，那么当你将这两个拦截器串联在一起统一指定给Producer后，Producer会按顺序执行上面的动作，然后再发送消息。</p><p>当前Kafka拦截器的设置方法是通过参数配置完成的。生产者和消费者两端有一个相同的参数，名字叫interceptor.classes，它指定的是一组类的列表，每个类就是特定逻辑的拦截器实现类。拿上面的例子来说，假设第一个拦截器的完整类路径是com.yourcompany.kafkaproject.interceptors.AddTimeStampInterceptor，第二个类是com.yourcompany.kafkaproject.interceptors.UpdateCounterInterceptor，那么你需要按照以下方法在Producer端指定拦截器：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">Properties props = new Properties();</span></div><div class="token-line"><span class="token plain">    List&lt;String&gt; interceptors = new ArrayList&lt;&gt;();</span></div><div class="token-line"><span class="token plain">    interceptors.add(&quot;com.yourcompany.kafkaproject.interceptors.AddTimestampInterceptor&quot;); // 拦截器1</span></div><div class="token-line"><span class="token plain">    interceptors.add(&quot;com.yourcompany.kafkaproject.interceptors.UpdateCounterInterceptor&quot;); // 拦截器2</span></div><div class="token-line"><span class="token plain">    props.put(ProducerConfig.INTERCEPTOR_CLASSES_CONFIG, interceptors);</span></div><div class="token-line"><span class="token plain">    ……</span></div></pre></div><p>现在问题来了，我们应该怎么编写AddTimeStampInterceptor和UpdateCounterInterceptor类呢？其实很简单，这两个类以及你自己编写的所有Producer端拦截器实现类都要继承org.apache.kafka.clients.producer.ProducerInterceptor接口。该接口是Kafka提供的，里面有两个核心的方法。</p><ol><li><p>onSend：该方法会在消息发送之前被调用。如果你想在发送之前对消息“美美容”，这个方法是你唯一的机会。</p></li><li><p>onAcknowledgement：该方法会在消息成功提交或发送失败之后被调用。还记得我在上一期中提到的发送回调通知callback吗？onAcknowledgement的调用要早于callback的调用。值得注意的是，这个方法和onSend不是在同一个线程中被调用的，因此如果你在这两个方法中调用了某个共享可变对象，一定要保证线程安全哦。还有一点很重要，这个方法处在Producer发送的主路径中，所以最好别放一些太重的逻辑进去，否则你会发现你的Producer TPS直线下降。</p></li></ol><p>同理，指定消费者拦截器也是同样的方法，只是具体的实现类要实现org.apache.kafka.clients.consumer.ConsumerInterceptor接口，这里面也有两个核心方法。</p><ol><li><p>onConsume：该方法在消息返回给Consumer程序之前调用。也就是说在开始正式处理消息之前，拦截器会先拦一道，搞一些事情，之后再返回给你。</p></li><li><p>onCommit：Consumer在提交位移之后调用该方法。通常你可以在该方法中做一些记账类的动作，比如打日志等。</p></li></ol><p>一定要注意的是，<strong>指定拦截器类时要指定它们的全限定名</strong>，即full qualified name。通俗点说就是要把完整包名也加上，不要只有一个类名在那里，并且还要保证你的Producer程序能够正确加载你的拦截器类。</p><h2 id="典型使用场景"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#典型使用场景"><span class="icon icon-link"></span></a><strong>典型使用场景</strong></h2><p>Kafka拦截器都能用在哪些地方呢？其实，跟很多拦截器的用法相同，<strong>Kafka拦截器可以应用于包括客户端监控、端到端系统性能检测、消息审计等多种功能在内的场景</strong>。</p><p>我以端到端系统性能检测和消息审计为例来展开介绍下。</p><p>今天Kafka默认提供的监控指标都是针对单个客户端或Broker的，你很难从具体的消息维度去追踪集群间消息的流转路径。同时，如何监控一条消息从生产到最后消费的端到端延时也是很多Kafka用户迫切需要解决的问题。</p><p>从技术上来说，我们可以在客户端程序中增加这样的统计逻辑，但是对于那些将Kafka作为企业级基础架构的公司来说，在应用代码中编写统一的监控逻辑其实是很难的，毕竟这东西非常灵活，不太可能提前确定好所有的计算逻辑。另外，将监控逻辑与主业务逻辑耦合也是软件工程中不提倡的做法。</p><p>现在，通过实现拦截器的逻辑以及可插拔的机制，我们能够快速地观测、验证以及监控集群间的客户端性能指标，特别是能够从具体的消息层面上去收集这些数据。这就是Kafka拦截器的一个非常典型的使用场景。</p><p>我们再来看看消息审计（message audit）的场景。设想你的公司把Kafka作为一个私有云消息引擎平台向全公司提供服务，这必然要涉及多租户以及消息审计的功能。</p><p>作为私有云的PaaS提供方，你肯定要能够随时查看每条消息是哪个业务方在什么时间发布的，之后又被哪些业务方在什么时刻消费。一个可行的做法就是你编写一个拦截器类，实现相应的消息审计逻辑，然后强行规定所有接入你的Kafka服务的客户端程序必须设置该拦截器。</p><h2 id="案例分享"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#案例分享"><span class="icon icon-link"></span></a><strong>案例分享</strong></h2><p>下面我以一个具体的案例来说明一下拦截器的使用。在这个案例中，我们通过编写拦截器类来统计消息端到端处理的延时，非常实用，我建议你可以直接移植到你自己的生产环境中。</p><p>我曾经给一个公司做Kafka培训，在培训过程中，那个公司的人提出了一个诉求。他们的场景很简单，某个业务只有一个Producer和一个Consumer，他们想知道该业务消息从被生产出来到最后被消费的平均总时长是多少，但是目前Kafka并没有提供这种端到端的延时统计。</p><p>学习了拦截器之后，我们现在知道可以用拦截器来满足这个需求。既然是要计算总延时，那么一定要有个公共的地方来保存它，并且这个公共的地方还是要让生产者和消费者程序都能访问的。在这个例子中，我们假设数据被保存在Redis中。</p><p>Okay，这个需求显然要实现生产者拦截器，也要实现消费者拦截器。我们先来实现前者：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public class AvgLatencyProducerInterceptor implements ProducerInterceptor&lt;String, String&gt; {</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        private Jedis jedis; // 省略Jedis初始化</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public ProducerRecord&lt;String, String&gt; onSend(ProducerRecord&lt;String, String&gt; record) {</span></div><div class="token-line"><span class="token plain">            jedis.incr(&quot;totalSentMessage&quot;);</span></div><div class="token-line"><span class="token plain">            return record;</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void onAcknowledgement(RecordMetadata metadata, Exception exception) {</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void close() {</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void configure(Map&lt;java.lang.String, ?&gt; configs) {</span></div><div class="token-line"><span class="token plain">        }</span></div></pre></div><p>上面的代码比较关键的是在发送消息前更新总的已发送消息数。为了节省时间，我没有考虑发送失败的情况，因为发送失败可能导致总发送数不准确。不过好在处理思路是相同的，你可以有针对性地调整下代码逻辑。</p><p>下面是消费者端的拦截器实现，代码如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public class AvgLatencyConsumerInterceptor implements ConsumerInterceptor&lt;String, String&gt; {</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        private Jedis jedis; //省略Jedis初始化</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public ConsumerRecords&lt;String, String&gt; onConsume(ConsumerRecords&lt;String, String&gt; records) {</span></div><div class="token-line"><span class="token plain">            long lantency = 0L;</span></div><div class="token-line"><span class="token plain">            for (ConsumerRecord&lt;String, String&gt; record : records) {</span></div><div class="token-line"><span class="token plain">                lantency += (System.currentTimeMillis() - record.timestamp());</span></div><div class="token-line"><span class="token plain">            }</span></div><div class="token-line"><span class="token plain">            jedis.incrBy(&quot;totalLatency&quot;, lantency);</span></div><div class="token-line"><span class="token plain">            long totalLatency = Long.parseLong(jedis.get(&quot;totalLatency&quot;));</span></div><div class="token-line"><span class="token plain">            long totalSentMsgs = Long.parseLong(jedis.get(&quot;totalSentMessage&quot;));</span></div><div class="token-line"><span class="token plain">            jedis.set(&quot;avgLatency&quot;, String.valueOf(totalLatency / totalSentMsgs));</span></div><div class="token-line"><span class="token plain">            return records;</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void onCommit(Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets) {</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void close() {</span></div><div class="token-line"><span class="token plain">        }</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">        @Override</span></div><div class="token-line"><span class="token plain">        public void configure(Map&lt;String, ?&gt; configs) {</span></div></pre></div><p>在上面的消费者拦截器中，我们在真正消费一批消息前首先更新了它们的总延时，方法就是用当前的时钟时间减去封装在消息中的创建时间，然后累计得到这批消息总的端到端处理延时并更新到Redis中。之后的逻辑就很简单了，我们分别从Redis中读取更新过的总延时和总消息数，两者相除即得到端到端消息的平均处理延时。</p><p>创建好生产者和消费者拦截器后，我们按照上面指定的方法分别将它们配置到各自的Producer和Consumer程序中，这样就能计算消息从Producer端到Consumer端平均的处理延时了。这种端到端的指标监控能够从全局角度俯察和审视业务运行情况，及时查看业务是否满足端到端的SLA目标。</p><h2 id="小结"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#小结"><span class="icon icon-link"></span></a><strong>小结</strong></h2><p>今天我们花了一些时间讨论Kafka提供的冷门功能：拦截器。如之前所说，拦截器的出场率极低，以至于我从未看到过国内大厂实际应用Kafka拦截器的报道。但冷门不代表没用。事实上，我们可以利用拦截器满足实际的需求，比如端到端系统性能检测、消息审计等。</p><p>从这一期开始，我们将逐渐接触到更多的实际代码。看完了今天的分享，我希望你能够亲自动手编写一些代码，去实现一个拦截器，体会一下Kafka拦截器的功能。要知道，“纸上得来终觉浅，绝知此事要躬行”。也许你在敲代码的同时，就会想到一个使用拦截器的绝妙点子，让我们拭目以待吧。</p><p><img src="/blog-backend/static/httpsstatic001geekbangorgresourceimagef20df2cbe18428396aab14749be10dc5550d.92ab1683.jpg" alt=""/></p><h2 id="开放讨论"><a aria-hidden="true" tabindex="-1" href="/blog-backend/kafka核心技术与实战/04.客户端实践及原理剖析/04#开放讨论"><span class="icon icon-link"></span></a><strong>开放讨论</strong></h2><p>思考这样一个问题：Producer拦截器onSend方法的签名如下：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">public ProducerRecord&lt;K, V&gt; onSend(ProducerRecord&lt;K, V&gt; record)</span></div></pre></div><p>如果我实现的逻辑仅仅是return null，你觉得Kafka会丢弃该消息，还是原封不动地发送消息？请动手试验一下，看看结果是否符合你的预期。</p><p>欢迎写下你的思考和答案，我们一起讨论。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/kafka核心技术与实战/04.客户端实践及原理剖析/04.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/27 11:15:40</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-backend/umi.e14e5a14.js"></script>
  </body>
</html>
