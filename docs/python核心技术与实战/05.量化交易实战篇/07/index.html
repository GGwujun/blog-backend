<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.png" />
    <link rel="stylesheet" href="/blog-backend/umi.3ec1f225.css" />
    <script>
      window.routerBase = "/blog-backend";
    </script>
    <script>
      //! umi version: 3.5.41
    </script>
    <script>
      !(function () {
        var e =
            navigator.cookieEnabled && void 0 !== window.localStorage
              ? localStorage.getItem("dumi:prefers-color")
              : "auto",
          o = window.matchMedia("(prefers-color-scheme: dark)").matches,
          t = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === t[2] ? (o ? t[1] : t[0]) : t.indexOf(e) > -1 ? e : t[0]
        );
      })();
    </script>
    <title>39 | Django：搭建监控平台 - 大师兄</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/python核心技术与实战/05.量化交易实战篇/07" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-backend/">大师兄</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span>后端开发<ul><li><a href="/blog-backend/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-backend/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-backend/go语言项目开发实战">go语言项目开发实战</a></li><li><a href="/blog-backend/kafka核心技术与实战">kafka核心技术与实战</a></li><li><a href="/blog-backend/kafka核心源码解读">kafka核心源码解读</a></li><li><a href="/blog-backend/零基础学python">零基础学python</a></li><li><a aria-current="page" class="active" href="/blog-backend/python核心技术与实战">python核心技术与实战</a></li><li><a href="/blog-backend/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-backend/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-backend/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-backend/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-backend/后端存储实战课">后端存储实战课</a></li><li><a href="/blog-backend/后端技术面试38讲">后端技术面试38讲</a></li><li><a href="/blog-backend/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li><li><a href="/blog-backend/现代c编程实战">现代c编程实战</a></li><li><a href="/blog-backend/罗剑锋的c实战笔记">罗剑锋的c实战笔记</a></li><li><a href="/blog-backend/零基础入门spark">零基础入门spark</a></li></ul></span><span>架构师<ul><li><a href="/blog-backend/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-backend/数据中台实战课">数据中台实战课</a></li></ul></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.png&#x27;)" href="/blog-backend/"></a><h1>大师兄</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li>后端开发<ul><li><a href="/blog-backend/go语言核心36讲">go语言核心36讲</a></li><li><a href="/blog-backend/go并发编程实战">go并发编程实战</a></li><li><a href="/blog-backend/go语言项目开发实战">go语言项目开发实战</a></li><li><a href="/blog-backend/kafka核心技术与实战">kafka核心技术与实战</a></li><li><a href="/blog-backend/kafka核心源码解读">kafka核心源码解读</a></li><li><a href="/blog-backend/零基础学python">零基础学python</a></li><li><a aria-current="page" class="active" href="/blog-backend/python核心技术与实战">python核心技术与实战</a></li><li><a href="/blog-backend/redis核心技术与实战">redis核心技术与实战</a></li><li><a href="/blog-backend/redis源码剖析与实战">redis源码剖析与实战</a></li><li><a href="/blog-backend/陈天rust编程第一课">陈天rust编程第一课</a></li><li><a href="/blog-backend/tonybaigo语言第一课">tonybaigo语言第一课</a></li><li><a href="/blog-backend/后端存储实战课">后端存储实战课</a></li><li><a href="/blog-backend/后端技术面试38讲">后端技术面试38讲</a></li><li><a href="/blog-backend/深入c语言和程序运行原理">深入c语言和程序运行原理</a></li><li><a href="/blog-backend/现代c编程实战">现代c编程实战</a></li><li><a href="/blog-backend/罗剑锋的c实战笔记">罗剑锋的c实战笔记</a></li><li><a href="/blog-backend/零基础入门spark">零基础入门spark</a></li></ul></li><li>架构师<ul><li><a href="/blog-backend/mysql实战45讲">mysql实战45讲</a></li><li><a href="/blog-backend/数据中台实战课">数据中台实战课</a></li></ul></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/blog-backend/python核心技术与实战">python核心技术与实战</a></li><li><a href="/blog-backend/python核心技术与实战/01.开篇词">01.开篇词</a><ul><li><a href="/blog-backend/python核心技术与实战/01.开篇词/01"><span>开篇词 | 从工程的角度深入理解Python</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇">02.基础篇</a><ul><li><a href="/blog-backend/python核心技术与实战/02.基础篇/01"><span>01 | 如何逐步突破，成为Python高手？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/02"><span>02 | Jupyter Notebook为什么是现代Python的必学技术？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/03"><span>03 | 列表和元组，到底用哪一个？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/04"><span>04 | 字典、集合，你真的了解吗？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/05"><span>05 | 深入浅出字符串</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/06"><span>06 | Python “黑箱”：输入与输出</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/07"><span>07 | 修炼基本功：条件与循环</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/08"><span>08 | 异常处理：如何提高程序的稳定性？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/09"><span>09 | 不可或缺的自定义函数</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/10"><span>10 | 简约不简单的匿名函数</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/11"><span>11 | 面向对象（上）：从生活中的类比说起</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/12"><span>12 | 面向对象（下）：如何实现一个搜索引擎？</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/13"><span>13 | 搭建积木：Python 模块化</span></a></li><li><a href="/blog-backend/python核心技术与实战/02.基础篇/14"><span>14 | 答疑（一）：列表和元组的内部实现是怎样的？</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇">03.进阶篇</a><ul><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/01"><span>15 | Python对象的比较、拷贝</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/02"><span>16 | 值传递，引用传递or其他，Python里参数是如何传递的？</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/03"><span>17 | 强大的装饰器</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/04"><span>18 | metaclass，是潘多拉魔盒还是阿拉丁神灯？</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/05"><span>19 | 深入理解迭代器和生成器</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/06"><span>20 | 揭秘 Python 协程</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/07"><span>21 | Python并发编程之Futures</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/08"><span>22 | 并发编程之Asyncio</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/09"><span>23 | 你真的懂Python GIL（全局解释器锁）吗？</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/10"><span>24 | 带你解析 Python 垃圾回收机制</span></a></li><li><a href="/blog-backend/python核心技术与实战/03.进阶篇/11"><span>25 | 答疑（二）：GIL与多线程是什么关系呢？</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇">04.规范篇</a><ul><li><a href="/blog-backend/python核心技术与实战/04.规范篇/01"><span>26 | 活都来不及干了，还有空注意代码风格？！</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/02"><span>27 | 学会合理分解代码，提高代码可读性</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/03"><span>28 | 如何合理利用assert？</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/04"><span>29 | 巧用上下文管理器和With语句精简代码</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/05"><span>30 | 真的有必要写单元测试吗？</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/06"><span>31 | pdb &amp; cProfile：调试和性能分析的法宝</span></a></li><li><a href="/blog-backend/python核心技术与实战/04.规范篇/07"><span>32 | 答疑（三）：如何选择合适的异常处理方式？</span></a></li></ul></li><li><a aria-current="page" class="active" href="/blog-backend/python核心技术与实战/05.量化交易实战篇">05.量化交易实战篇</a><ul><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/01"><span>33 | 带你初探量化世界</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/02"><span>34 | RESTful &amp; Socket：搭建交易执行层核心</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/03"><span>35 | RESTful &amp; Socket：行情数据对接和抓取</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/04"><span>36 | Pandas &amp; Numpy：策略与回测系统</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/05"><span>37 | Kafka &amp; ZMQ：自动化交易流水线</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/06"><span>38 | MySQL：日志和数据存储系统</span></a></li><li><a aria-current="page" class="active" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07"><span>39 | Django：搭建监控平台</span></a></li><li><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/08"><span>40 | 总结：Python中的数据结构与算法全景</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/06.技术见闻与分享">06.技术见闻与分享</a><ul><li><a href="/blog-backend/python核心技术与实战/06.技术见闻与分享/01"><span>41 | 硅谷一线互联网公司的工作体验</span></a></li><li><a href="/blog-backend/python核心技术与实战/06.技术见闻与分享/02"><span>42 | 细数技术研发的注意事项</span></a></li><li><a href="/blog-backend/python核心技术与实战/06.技术见闻与分享/03"><span>加餐 | 带你上手SWIG：一份清晰好用的SWIG编程实践指南</span></a></li><li><a href="/blog-backend/python核心技术与实战/06.技术见闻与分享/04"><span>43 | Q&amp;A：聊一聊职业发展和选择</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/07.结束语">07.结束语</a><ul><li><a href="/blog-backend/python核心技术与实战/07.结束语/01"><span>结束语 | 技术之外的几点成长建议</span></a></li><li><a href="/blog-backend/python核心技术与实战/07.结束语/02"><span>结课测试 | 关于Python的这些知识，你都掌握了吗？</span></a></li></ul></li><li><a href="/blog-backend/python核心技术与实战/summary">python核心技术与实战</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="Django 简介和安装" data-depth="2"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#django-简介和安装"><span>Django 简介和安装</span></a></li><li title="MVC 架构" data-depth="2"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#mvc-架构"><span>MVC 架构</span></a></li><li title="设计模型 Model" data-depth="3"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计模型-model"><span>设计模型 Model</span></a></li><li title="设计视图 Views" data-depth="3"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计视图-views"><span>设计视图 Views</span></a></li><li title="设计模板Templates" data-depth="3"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计模板templates"><span>设计模板Templates</span></a></li><li title="设计链接 Urls" data-depth="3"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计链接-urls"><span>设计链接 Urls</span></a></li><li title="测试" data-depth="3"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#测试"><span>测试</span></a></li><li title="总结" data-depth="2"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#总结"><span>总结</span></a></li><li title="思考题" data-depth="2"><a href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#思考题"><span>思考题</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="39--django搭建监控平台"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#39--django搭建监控平台"><span class="icon icon-link"></span></a>39 | Django：搭建监控平台</h1><p>你好，我是景霄。</p><p>通过前几节课的学习，相信你对量化交易系统已经有了一个最基本的认知，也能通过自己的代码，搭建一个简单的量化交易系统来进行盈利。</p><p>前面几节课，我们的重点在后台代码、中间件、分布式系统和设计模式上。这节课，我们重点来看前端交互。</p><p>监控和运维，是互联网工业链上非常重要的一环。监控的目的就是防患于未然。通过监控，我们能够及时了解到企业网络的运行状态。一旦出现安全隐患，你就可以及时预警，或者是以其他方式通知运维人员，让运维监控人员有时间处理和解决隐患，避免影响业务系统的正常使用，将一切问题的根源扼杀在摇篮当中。</p><p>在硅谷互联网大公司中，监控和运维被称为 SRE，是公司正常运行中非常重要的一环。作为 billion 级别的 Facebook，内部自然也有着大大小小、各种各样的监控系统和运维工具，有的对标业务数据，有的对标服务器的健康状态，有的则是面向数据库和微服务的控制信息。</p><p>不过，万变不离其宗，运维工作最重要的就是维护系统的稳定性。除了熟悉运用各种提高运维效率的工具来辅助工作外，云资源费用管理、安全管理、监控等，都需要耗费不少精力和时间。运维监控不是一朝一夕得来的，而是随着业务发展的过程中同步和发展的。</p><p>作为量化实践内容的最后一节，今天我们就使用 Django 这个 Web 框架，来搭建一个简单的量化监控平台。</p><h2 id="django-简介和安装"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#django-简介和安装"><span class="icon icon-link"></span></a>Django 简介和安装</h2><p>Django 是用 Python 开发的一个免费开源的 Web 框架，可以用来快速搭建优雅的高性能网站。它采用的是“MVC”的框架模式，即模型 M、视图 V 和控制器 C。</p><p>Django 最大的特色，在于将网页和数据库中复杂的关系，转化为 Python 中对应的简单关系。它的设计目的，是使常见的Web开发任务变得快速而简单。Django是开源的，不是商业项目或者科研项目，并且集中力量解决Web开发中遇到的一系列问题。所以，Django 每天都会在现有的基础上进步，以适应不断更迭的开发需求。这样既节省了开发时间，也提高了后期维护的效率。</p><p>说了这么多，接下来，我们通过上手使用进一步来了解。先来看一下，如何安装和使用 Django。你可以先按照下面代码块的内容来操作，安装Django ：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">pip3 install Django</span></div><div class="token-line"><span class="token plain">    django-admin --version</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    ########## 输出 ##########</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    2.2.3</span></div></pre></div><p>接着，我们来创建一个新的 Django 项目：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">django-admin startproject TradingMonitor</span></div><div class="token-line"><span class="token plain">    cd TradingMonitor/</span></div><div class="token-line"><span class="token plain">    python3 manage.py migrate</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    ########## 输出 ##########</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">Applying contenttypes.0001_initial... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0001_initial... OK</span></div><div class="token-line"><span class="token plain">      Applying admin.0001_initial... OK</span></div><div class="token-line"><span class="token plain">      Applying admin.0002_logentry_remove_auto_add... OK</span></div><div class="token-line"><span class="token plain">      Applying admin.0003_logentry_add_action_flag_choices... OK</span></div><div class="token-line"><span class="token plain">      Applying contenttypes.0002_remove_content_type_name... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0002_alter_permission_name_max_length... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0003_alter_user_email_max_length... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0004_alter_user_username_opts... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0005_alter_user_last_login_null... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0006_require_contenttypes_0002... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0007_alter_validators_add_error_messages... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0008_alter_user_username_max_length... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0009_alter_user_last_name_max_length... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0010_alter_group_name_max_length... OK</span></div><div class="token-line"><span class="token plain">      Applying auth.0011_update_proxy_permissions... OK</span></div><div class="token-line"><span class="token plain">      Applying sessions.0001_initial... OK</span></div></pre></div><p>这时，你能看到文件系统大概是下面这样的：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">TradingMonitor/</span></div><div class="token-line"><span class="token plain">    ├── TradingMonitor</span></div><div class="token-line"><span class="token plain">    │   ├── __init__.py</span></div><div class="token-line"><span class="token plain">    │   ├── settings.py</span></div><div class="token-line"><span class="token plain">    │   ├── urls.py</span></div><div class="token-line"><span class="token plain">    │   └── wsgi.py</span></div><div class="token-line"><span class="token plain">    ├── db.sqlite3</span></div><div class="token-line"><span class="token plain">    └── manage.py</span></div></pre></div><p>我简单解释一下它的意思：</p><ul><li>TradingMonitor/TradingMonitor，表示项目最初的 Python 包；</li><li>TradingMonitor/init.py，表示一个空文件，声明所在目录的包为一个 Python 包；</li><li>TradingMonitor/settings.py，管理项目的配置信息；</li><li>TradingMonitor/urls.py，声明请求 URL 的映射关系；</li><li>TradingMonitor/wsgi.py，表示Python 程序和 Web 服务器的通信协议；</li><li>manage.py，表示一个命令行工具，用来和 Django 项目进行交互；</li><li>Db.sqlite3，表示默认的数据库，可以在设置中替换成其他数据库。</li></ul><p>另外，你可能注意到了上述命令中的<code>python3 manage.py migrate</code>，这个命令表示创建或更新数据库模式。每当 model 源代码被改变后，如果我们要将其应用到数据库上，就需要执行一次这个命令。</p><p>接下来，我们为这个系统添加管理员账户：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">python3 manage.py createsuperuser</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    ########## 输出 ##########</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    Username (leave blank to use &#x27;ubuntu&#x27;): admin</span></div><div class="token-line"><span class="token plain">    Email address:  </span></div><div class="token-line"><span class="token plain">    Password: </span></div><div class="token-line"><span class="token plain">    Password (again): </span></div><div class="token-line"><span class="token plain">    Superuser created successfully.</span></div></pre></div><p>然后，我们来启动 Django 的 debugging 模式：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">python3 manage.py runserver</span></div></pre></div><p>最后，打开浏览器输入：<code>http://127.0.0.1:8000</code>。如果你能看到下面这个画面，就说明 Django 已经部署成功了。</p><p><img src="/blog-backend/static/httpsstatic001geekbangorgresourceimage6d026d8244a8016c97139b3de4680ae2e802.a69ac380.png" alt=""/></p><p>Django 的安装是不是非常简单呢？这其实也是 Python 一贯的理念，简洁，并简化入门的门槛。</p><p>OK，现在我们再定位到 <code>http://127.0.0.1:8000/admin</code>，你会看到 Django 的后台管理网页，这里我就不过多介绍了。</p><p><img src="data:image/png;base64,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" alt=""/><br/><img src="/blog-backend/static/httpsstatic001geekbangorgresourceimage3125311b3ebf2b0801e84de60d36a81c6925.dd61486c.png" alt=""/></p><p>到此，Django 就已经成功安装，并且正常启动啦。</p><h2 id="mvc-架构"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#mvc-架构"><span class="icon icon-link"></span></a>MVC 架构</h2><p>刚刚我说过，MVC 架构是 Django 设计模式的精髓。接下来，我们就来具体看一下这个架构，并通过 Django 动手搭建一个服务端。</p><h3 id="设计模型-model"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计模型-model"><span class="icon icon-link"></span></a>设计模型 Model</h3><p>在之前的日志和存储系统这节课中，我介绍过 peewee 这个库，它能避开通过繁琐的 SQL 语句来操作 MySQL，直接使用 Python 的 class 来进行转换。事实上，这也是 Django 采取的方式。</p><p>Django 无需数据库就可以使用，它通过对象关系映射器（object-relational mapping），仅使用Python代码就可以描述数据结构。</p><p>我们先来看下面这段 Model 代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">#  TradingMonitor/models.py</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    from django.db import models</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    class Position(models.Model):</span></div><div class="token-line"><span class="token plain">        asset = models.CharField(max_length=10)</span></div><div class="token-line"><span class="token plain">        timestamp = models.DateTimeField()</span></div><div class="token-line"><span class="token plain">        amount = models.DecimalField(max_digits=10, decimal_places=3)</span></div></pre></div><p>models.py 文件主要用一个 Python 类来描述数据表，称为模型 。运用这个类，你可以通过简单的 Python 代码来创建、检索、更新、删除数据库中的记录，而不用写一条又一条的SQL语句，这也是我们之前所说的避免通过 SQL 操作数据库。</p><p>在这里，我们创建了一个 Position 模型，用来表示我们的交易仓位信息。其中，</p><ul><li>asset 表示当前持有资产的代码，例如 btc；</li><li>timestamp 表示时间戳；</li><li>amount 则表示时间戳时刻的持仓信息。</li></ul><h3 id="设计视图-views"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计视图-views"><span class="icon icon-link"></span></a>设计视图 Views</h3><p>在模型被定义之后，我们便可以在视图中引用模型了。通常，视图会根据参数检索数据，加载一个模板，并使用检索到的数据呈现模板。</p><p>设计视图，则是我们用来实现业务逻辑的地方。我们来看 render_positions 这个代码，它接受 request 和 asset 两个参数，我们先不用管 request。这里的 asset 表示指定一个资产名称，例如 btc，然后这个函数返回一个渲染页面。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">#  TradingMonitor/views.py</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    from django.shortcuts import render</span></div><div class="token-line"><span class="token plain">    from .models import Position</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    def render_positions(request, asset):</span></div><div class="token-line"><span class="token plain">        positions = Position.objects.filter(asset = asset)</span></div><div class="token-line"><span class="token plain">        context = {&#x27;asset&#x27;: asset, &#x27;positions&#x27;: positions}</span></div><div class="token-line"><span class="token plain">        return render(request, &#x27;positions.html&#x27;, context)</span></div></pre></div><p>不过，这个函数具体是怎么工作的呢？我们一行行来看。</p><p><code>positions = Position.objects.filter(asset = asset)</code>，这行代码向数据库中执行一个查询操作，其中， filter 表示筛选，意思是从数据库中选出所有我们需要的 asset 的信息。不过，这里我只是为你举例做示范；真正做监控的时候，我们一般会更有针对性地从数据库中筛选读取信息，而不是一口气读取出所有的信息。</p><p><code>context = <!-- -->{<!-- -->&#x27;asset&#x27;: asset, &#x27;positions&#x27;: positions<!-- -->}</code>，这行代码没什么好说的，封装一个字典。至于这个字典的用处，下面的内容中可以体现。</p><p><code>return render(request, &#x27;positions.html&#x27;, context)</code>，最后这行代码返回一个页面。这里我们采用的模板设计，这也是 Django 非常推荐的开发方式，也就是让模板和数据分离，这样，数据只需要向其中填充即可。</p><p>最后的模板文件是 <code>position.html</code>，你应该注意到了， context 作为变量传给了模板，下面我们就来看一下设计模板的内容。</p><h3 id="设计模板templates"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计模板templates"><span class="icon icon-link"></span></a>设计模板Templates</h3><p>模板文件，其实就是 HTML 文件和部分代码的综合。你可以想象成，这个HTML 在最终送给用户之前，需要被我们预先处理一下，而预先处理的方式就是找到对应的地方进行替换。</p><p>我们来看下面这段示例代码：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">#  TradingMonitor/templates/positions.html</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;!DOCTYPE html&gt;</span></div><div class="token-line"><span class="token plain">    &lt;html lang=&quot;en-US&quot;&gt;</span></div><div class="token-line"><span class="token plain">    &lt;head&gt;</span></div><div class="token-line"><span class="token plain">    &lt;title&gt;Positions for {{asset}}&lt;/title&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/head&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;body&gt;</span></div><div class="token-line"><span class="token plain">    &lt;h1&gt;Positions for {{asset}}&lt;/h1&gt;</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    &lt;table&gt;</span></div><div class="token-line"><span class="token plain">    &lt;tr&gt;</span></div><div class="token-line"><span class="token plain">        &lt;th&gt;Time&lt;/th&gt;</span></div><div class="token-line"><span class="token plain">        &lt;th&gt;Amount&lt;/th&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/tr&gt;</span></div><div class="token-line"><span class="token plain">    {% for position in positions %}</span></div><div class="token-line"><span class="token plain">    &lt;tr&gt;</span></div><div class="token-line"><span class="token plain">        &lt;th&gt;{{position.timestamp}}&lt;/th&gt;</span></div><div class="token-line"><span class="token plain">        &lt;th&gt;{{position.amount}}&lt;/th&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/tr&gt;</span></div><div class="token-line"><span class="token plain">    {% endfor %}</span></div><div class="token-line"><span class="token plain">    &lt;/table&gt;</span></div><div class="token-line"><span class="token plain">    &lt;/body&gt;</span></div></pre></div><p>我重点说一下几个地方。首先是<code>&lt;title&gt;Positions for <!-- -->{<!-- -->{<!-- -->asset<!-- -->}<!-- -->}<!-- -->&lt;/title&gt;</code>，这里双大括号括住 asset 这个变量，这个变量对应的正是前面 context 字典中的 asset key。Django 的渲染引擎会将 asset ，替换成 context 中 asset 对应的内容，此处是替换成了 btc。</p><p>再来看<code>{<!-- -->% for position in positions %<!-- -->}</code>，这是个很关键的地方。我们需要处理一个列表的情况，用 for 对 positions 进行迭代就行了。这里的 positions ，同样对应的是 context 中的 positions。</p><p>末尾的<code>{<!-- -->% endfor %<!-- -->}</code>，自然就表示结束了。这样，我们就将数据封装到了一个列表之中。</p><h3 id="设计链接-urls"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#设计链接-urls"><span class="icon icon-link"></span></a>设计链接 Urls</h3><p>最后，我们需要为我们的操作提供 URL 接口，具体操作我放在了下面的代码中，内容比较简单，我就不详细展开讲解了。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">#  TradingMonitor/urls.py</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    from django.contrib import admin</span></div><div class="token-line"><span class="token plain">    from django.urls import path</span></div><div class="token-line"><span class="token plain">    from . import views</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    urlpatterns = [</span></div><div class="token-line"><span class="token plain">        path(&#x27;admin/&#x27;, admin.site.urls),</span></div><div class="token-line"><span class="token plain">        path(&#x27;positions/&lt;str:asset&gt;&#x27;, views.render_positions),</span></div><div class="token-line"><span class="token plain">    ]</span></div></pre></div><p>到这里，我们就可以通过 <code>http://127.0.0.1:8000/positions/btc</code> 来访问啦！</p><h3 id="测试"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#测试"><span class="icon icon-link"></span></a>测试</h3><p>当然，除了主要流程外，我还需要强调几个很简单但非常关键的细节，不然，我们这些改变就不能被真正地应用。</p><p>第一步，在 <code>TradingMonitor/TradingMonitor</code> 下，新建一个文件夹 migrations；并在这个文件夹中，新建一个空文件 <code>__init__.py</code>。</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">mkdir TradingMonitor/migrations</span></div><div class="token-line"><span class="token plain">    touch TradingMonitor/migrations/__init__.py</span></div></pre></div><p>此时，你的目录结构应该长成下面这样：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">TradingMonitor/</span></div><div class="token-line"><span class="token plain">    ├── TradingMonitor</span></div><div class="token-line"><span class="token plain">    │   ├── migrations</span></div><div class="token-line"><span class="token plain">    │       └── __init__.py</span></div><div class="token-line"><span class="token plain">    │   ├── templates</span></div><div class="token-line"><span class="token plain">    │       └── positions.html</span></div><div class="token-line"><span class="token plain">    │   ├── __init__.py</span></div><div class="token-line"><span class="token plain">    │   ├── settings.py</span></div><div class="token-line"><span class="token plain">    │   ├── urls.py</span></div><div class="token-line"><span class="token plain">    │   ├── models.py</span></div><div class="token-line"><span class="token plain">    │   ├── views.py</span></div><div class="token-line"><span class="token plain">    │   └── wsgi.py</span></div><div class="token-line"><span class="token plain">    ├── db.sqlite3</span></div><div class="token-line"><span class="token plain">    └── manage.py</span></div></pre></div><p>第二步，修改 <code>TradingMonitor/settings.py</code>：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">INSTALLED_APPS = [</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.admin&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.auth&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.contenttypes&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.sessions&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.messages&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;django.contrib.staticfiles&#x27;,</span></div><div class="token-line"><span class="token plain">        &#x27;TradingMonitor&#x27;,  # 这里把我们的 app 加上</span></div><div class="token-line"><span class="token plain">    ]</span></div></pre></div><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">TEMPLATES = [</span></div><div class="token-line"><span class="token plain">        {</span></div><div class="token-line"><span class="token plain">            &#x27;BACKEND&#x27;: &#x27;django.template.backends.django.DjangoTemplates&#x27;,</span></div><div class="token-line"><span class="token plain">            &#x27;DIRS&#x27;: [os.path.join(BASE_DIR, &#x27;TradingMonitor/templates&#x27;)],  # 这里把 templates 的目录加上</span></div><div class="token-line"><span class="token plain">            &#x27;APP_DIRS&#x27;: True,</span></div><div class="token-line"><span class="token plain">            &#x27;OPTIONS&#x27;: {</span></div><div class="token-line"><span class="token plain">                &#x27;context_processors&#x27;: [</span></div><div class="token-line"><span class="token plain">                    &#x27;django.template.context_processors.debug&#x27;,</span></div><div class="token-line"><span class="token plain">                    &#x27;django.template.context_processors.request&#x27;,</span></div><div class="token-line"><span class="token plain">                    &#x27;django.contrib.auth.context_processors.auth&#x27;,</span></div><div class="token-line"><span class="token plain">                    &#x27;django.contrib.messages.context_processors.messages&#x27;,</span></div><div class="token-line"><span class="token plain">                ],</span></div><div class="token-line"><span class="token plain">            },</span></div><div class="token-line"><span class="token plain">        },</span></div><div class="token-line"><span class="token plain">    ]</span></div></pre></div><p>第三步，运行 <code>python manage.py makemigrations</code>：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">python manage.py makemigrations</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    ########## 输出 ##########</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    Migrations for &#x27;TradingMonitor&#x27;:</span></div><div class="token-line"><span class="token plain">      TradingMonitor/migrations/0001_initial.py</span></div><div class="token-line"><span class="token plain">        - Create model Position</span></div></pre></div><p>第四步，运行 <code>python manage.py migrate</code>：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">python manage.py migrate</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    ########## 输出 ##########</span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    </span></div><div class="token-line"><span class="token plain">    Operations to perform:</span></div><div class="token-line"><span class="token plain">      Apply all migrations: TradingMonitor, admin, auth, contenttypes, sessions</span></div><div class="token-line"><span class="token plain">    Running migrations:</span></div><div class="token-line"><span class="token plain">      Applying TradingMonitor.0001_initial... OK</span></div></pre></div><p>这几步的具体操作，我都用代码和注释表示了出来，你完全可以同步进行操作。操作完成后，现在，我们的数据结构就已经被成功同步到数据库中了。</p><p>最后，输入 <code>python manage.py runserver</code>，然后打开浏览器输入<code>http://127.0.0.1:8000/positions/btc</code>，你就能看到效果啦。<br/><img src="/blog-backend/static/httpsstatic001geekbangorgresourceimageab4aabb5a9aaf8016f485d38552f4291784a.874ff9ec.png" alt=""/></p><p>现在，我们再回过头来看一下 MVC 模式，通过我画的这张图，你可以看到，M、V、C这三者，以一种插件似的、松耦合的方式连接在一起：</p><p><img src="/blog-backend/static/httpsstatic001geekbangorgresourceimagec7bcc7ff058064e869d6da652805c29263bc.4000a5ee.png" alt=""/></p><p>当然，我带你写的只是一个简单的 Django 应用程序，对于真正的量化平台监控系统而言，这还只是一个简单的开始。</p><p>除此之外，对于监控系统来说，其实还有着非常多的开源插件可以使用。有一些界面非常酷炫，有一些可以做到很高的稳定性和易用性，它们很多都可以结合 Django 做出很好的效果来。比较典型的有：</p><ul><li>Graphite 是一款存储时间序列数据，并通过 Django Web 应用程序在图形中显示的插件；</li><li>Vimeo 则是一个基于 Graphite 的仪表板，具有附加功能和平滑的设计；</li><li>Scout 监控 Django和Flask应用程序的性能，提供自动检测视图、SQL查询、模板等。</li></ul><h2 id="总结"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#总结"><span class="icon icon-link"></span></a>总结</h2><p>这一节课的内容更靠近上游应用层，我们以 Django 这个 Python 后端为例，讲解了搭建一个服务端的过程。你应该发现了，使用 RESTful Framework 搭建服务器，是一个如此简单的过程，你可以去开一个自己的交易所了（笑）。相比起具体的技术，今天我所讲的 MVC 框架和 Django 的思想，更值得你去深入学习和领会。</p><h2 id="思考题"><a aria-hidden="true" tabindex="-1" href="/blog-backend/python核心技术与实战/05.量化交易实战篇/07#思考题"><span class="icon icon-link"></span></a>思考题</h2><p>今天我想给你留一个难度比较高的作业。RESTful API 在 Django 中是如何实现安全认证的？你能通过搜索和自学掌握这个知识点吗？希望可以在留言区看到你的认真学习记录和总结，我会一一给出建议。也欢迎你把这篇文章分享给你的朋友、同事，一起交流、一起进步。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/GGwujun/blog/edit/master/ssrc/python核心技术与实战/05.量化交易实战篇/07.md">在 GitHub 上编辑此页<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="最后更新时间：">2023/9/27 11:15:40</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script>
      (function () {
        if (!location.port) {
          (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
              i[r] ||
              function () {
                (i[r].q = i[r].q || []).push(arguments);
              }),
              (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
          })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
          );
          ga("create", "UA-149864185-1", "auto");
          ga("send", "pageview");
        }
      })();
    </script>
    <script src="/blog-backend/umi.e14e5a14.js"></script>
  </body>
</html>
